surf_frag = surface_total_frags_pct,
elev_l = elev_l,
elev_rv = elev_r,
elev_h = elev_h,
map_l = map_l,
map_rv = map_r,
map_h = map_h,
maat_l = maat_l,
maat_rv = maat_r,
maat_h = maat_h,
ffd_l = ffd_l,
ffd_rv = ffd_r,
ffd_h = ffd_h,
aspectccwise = aspectccwise,
aspectrep = aspectrep,
aspectcwise = aspectcwise,
landform = landform_string,
taxtemp = taxtempregime,
drainagecl = drainagecl,
ecosite = ecosite_name,
ecosite_id = ecosite_id,
taxorder = taxorder,
taxsuborder = taxsuborder
)
)
restriction_data <- restrictions(nasis_selection) %>%
dplyr::select(coiid, reskind, resdept_l, resdept_r, resdept_h, reshard) %>%
subset(!grepl("noncemented", reshard)) %>%
dplyr::group_by(coiid) %>%
arrange(resdept_r) %>%
dplyr::slice(1)
restriction_data$coiid <- as.character(restriction_data$coiid)
component_data <- left_join(component_data, restriction_data)
all_data <- horizon_to_component_data %>%
dplyr::rename(coiid = component) %>%
left_join(component_data) %>%
dplyr::select(coiid,  compname, ecosite, ecosite_id, landform, pmkind, pmorigin, taxtemp, textural_class,
texture_qualifier, rock_frag, surf_frag, depth_to_restr, drainagecl, slope_l, slope_r,
slope_h, ph_l_mean, ph_r_mean, ph_h_mean, elev_l, elev_rv, elev_h,
map_l, map_rv, map_h, maat_l, maat_rv, maat_h, ffd_l, ffd_rv, ffd_h ,comppct_r, dmuiid, everything())
write.csv(all_data, "C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv",
row.names = FALSE)
ecosite_report  <-
read.csv("C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv")
library(dplyr)
library(stringr)
library(randomForest)
View(ecosite_report %>% filter(is.na(ecosite_id)))
View(ecosite_report %>% filter(is.na(ecosite_id)) & compkind %in% c("series"))
unique(ecosite_report$compkind)
View(ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series")))
library(sf)
library(aqp)
library(dplyr)
library(soilDB)
library(stringr)
# nasis_selection <- fetchNASIS(from = "components", rmHzErrors = FALSE)
nasis_selection <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
nasis_selection <- subset(nasis_selection, compkind != "miscellaneous area" &
majcompflag == "1")
nasis_selection$ssastatus
nasis_selection$mlraoffice
nasis_selection$liid
nasis_selection$mukind
nasis_selection$areasymbol
nasis_selection$areaname
library(sf)
library(aqp)
library(dplyr)
library(soilDB)
library(stringr)
# nasis_selection <- fetchNASIS(from = "components", rmHzErrors = FALSE)
nasis_selection <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
nasis_selection <- subset(nasis_selection, compkind != "miscellaneous area" &
majcompflag == "1")
horizon_df <- data.frame(component = nasis_selection$coiid,
texture = nasis_selection$texture,
frag_vol = nasis_selection$fragvoltot_r,
sand = nasis_selection$sandtotal_r,
clay = nasis_selection$claytotal_r,
sieve10 = nasis_selection$sieveno10_r,
thickness = nasis_selection$hzdepb_r - nasis_selection$hzdept_r,
rock_frag = nasis_selection$total_frags_pct,
ph_l = nasis_selection$ph1to1h2o_l,
ph_r = nasis_selection$ph1to1h2o_r,
ph_h = nasis_selection$ph1to1h2o_h,
awc_l = nasis_selection$awc_l,
awc_r = nasis_selection$awc_r,
awc_h = nasis_selection$awc_h)
horizon_df$texture_qualifier <- horizon_df$texture %>% str_extract(".*(?=-)")
horizon_df$texture_only <- horizon_df$texture %>% str_extract("(?<=-).*")
horizon_df$texture_only <- ifelse(is.na(horizon_df$texture_only), horizon_df$texture, horizon_df$texture_only)
horizon_df$thickness_modified <- ifelse(is.na(horizon_df$clay), 0.1, ifelse(horizon_df$texture == "BR", 0.1, horizon_df$thickness))
summarized_texture_qualifier <- horizon_df %>%
dplyr::group_by(component, texture_qualifier) %>%
dplyr::summarize(combined_thickness = sum(thickness_modified)) %>%
dplyr::ungroup() %>%
dplyr::group_by(component) %>%
top_n(1, combined_thickness) %>% ungroup() %>%
dplyr::select(-combined_thickness)
weighted_texture <- horizon_df %>%
dplyr::filter(!is.na(clay) & !is.na(sand) & texture != "BR") %>%
dplyr::group_by(component) %>%
dplyr::summarise(clay_mean_texture = weighted.mean(clay, thickness_modified),
sand_mean_texture = weighted.mean(sand, thickness_modified),
ph_l_mean = weighted.mean(ph_l, thickness_modified),
ph_r_mean = weighted.mean(ph_r, thickness_modified),
ph_h_mean = weighted.mean(ph_h, thickness_modified),
awc_l_sum = sum(awc_l * thickness_modified),
awc_r_sum = sum(awc_r * thickness_modified),
awc_h_sum = sum(awc_h * thickness_modified),
rock_frag = weighted.mean(rock_frag, thickness_modified),
depth_to_restr = sum(thickness_modified)) %>%
dplyr::mutate(textural_class = aqp::ssc_to_texcl(clay = clay_mean_texture,
sand = sand_mean_texture))
horizon_to_component_data <- dplyr::left_join(summarized_texture_qualifier, weighted_texture)
component_data <-
with(site(nasis_selection),
data.frame(
coiid = coiid,
compname = compname,
compkind = compkind,
areasymbol = areasymbol,
areaname = areaname,
comppct_r = comppct_r,
slope_l = slope_l,
slope_r = slope_r,
slope_h = slope_h,
majcompflag = majcompflag,
pmkind = pmkind,
dmuiid = dmuiid,
pmorigin = pmorigin,
surf_frag = surface_total_frags_pct,
elev_l = elev_l,
elev_rv = elev_r,
elev_h = elev_h,
map_l = map_l,
map_rv = map_r,
map_h = map_h,
maat_l = maat_l,
maat_rv = maat_r,
maat_h = maat_h,
ffd_l = ffd_l,
ffd_rv = ffd_r,
ffd_h = ffd_h,
aspectccwise = aspectccwise,
aspectrep = aspectrep,
aspectcwise = aspectcwise,
landform = landform_string,
taxtemp = taxtempregime,
drainagecl = drainagecl,
ecosite = ecosite_name,
ecosite_id = ecosite_id,
taxorder = taxorder,
taxsuborder = taxsuborder
)
)
restriction_data <- restrictions(nasis_selection) %>%
dplyr::select(coiid, reskind, resdept_l, resdept_r, resdept_h, reshard) %>%
subset(!grepl("noncemented", reshard)) %>%
dplyr::group_by(coiid) %>%
arrange(resdept_r) %>%
dplyr::slice(1)
restriction_data$coiid <- as.character(restriction_data$coiid)
component_data <- left_join(component_data, restriction_data)
all_data <- horizon_to_component_data %>%
dplyr::rename(coiid = component) %>%
left_join(component_data) %>%
dplyr::select(coiid,  compname, ecosite, ecosite_id, landform, pmkind, pmorigin, taxtemp, textural_class,
texture_qualifier, rock_frag, surf_frag, depth_to_restr, drainagecl, slope_l, slope_r,
slope_h, ph_l_mean, ph_r_mean, ph_h_mean, elev_l, elev_rv, elev_h,
map_l, map_rv, map_h, maat_l, maat_rv, maat_h, ffd_l, ffd_rv, ffd_h ,comppct_r, dmuiid, everything())
write.csv(all_data, "C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv",
row.names = FALSE)
ecosite_report  <-
read.csv("C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv")
library(dplyr)
library(stringr)
library(randomForest)
View(ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series")))
test <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series"))
unique(test$areaname)
unique(test$areasymbol)
unique(test$areaname)
test <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family"))
nrow(test)
sonora_surveys <- "C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv"
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family"))
ecosite_report  <-
read.csv("C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv")
library(dplyr)
library(stringr)
library(randomForest)
sonora_surveys
sonora_surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv")
sonora_surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv")
sonora_surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv") %>% dplyr::pull(Area.Sym)
sonora_surveys
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_surveys)
View(missing_ecosite)
library(sf)
library(aqp)
library(dplyr)
library(soilDB)
library(stringr)
# nasis_selection <- fetchNASIS(from = "components", rmHzErrors = FALSE)
nasis_selection <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
nasis_selection <- subset(nasis_selection, compkind != "miscellaneous area" &
majcompflag == "1")
horizon_df <- data.frame(component = nasis_selection$coiid,
texture = nasis_selection$texture,
frag_vol = nasis_selection$fragvoltot_r,
sand = nasis_selection$sandtotal_r,
clay = nasis_selection$claytotal_r,
sieve10 = nasis_selection$sieveno10_r,
thickness = nasis_selection$hzdepb_r - nasis_selection$hzdept_r,
rock_frag = nasis_selection$total_frags_pct,
ph_l = nasis_selection$ph1to1h2o_l,
ph_r = nasis_selection$ph1to1h2o_r,
ph_h = nasis_selection$ph1to1h2o_h,
awc_l = nasis_selection$awc_l,
awc_r = nasis_selection$awc_r,
awc_h = nasis_selection$awc_h)
horizon_df$texture_qualifier <- horizon_df$texture %>% str_extract(".*(?=-)")
horizon_df$texture_only <- horizon_df$texture %>% str_extract("(?<=-).*")
horizon_df$texture_only <- ifelse(is.na(horizon_df$texture_only), horizon_df$texture, horizon_df$texture_only)
horizon_df$thickness_modified <- ifelse(is.na(horizon_df$clay), 0.1, ifelse(horizon_df$texture == "BR", 0.1, horizon_df$thickness))
summarized_texture_qualifier <- horizon_df %>%
dplyr::group_by(component, texture_qualifier) %>%
dplyr::summarize(combined_thickness = sum(thickness_modified)) %>%
dplyr::ungroup() %>%
dplyr::group_by(component) %>%
top_n(1, combined_thickness) %>% ungroup() %>%
dplyr::select(-combined_thickness)
weighted_texture <- horizon_df %>%
dplyr::filter(!is.na(clay) & !is.na(sand) & texture != "BR") %>%
dplyr::group_by(component) %>%
dplyr::summarise(clay_mean_texture = weighted.mean(clay, thickness_modified),
sand_mean_texture = weighted.mean(sand, thickness_modified),
ph_l_mean = weighted.mean(ph_l, thickness_modified),
ph_r_mean = weighted.mean(ph_r, thickness_modified),
ph_h_mean = weighted.mean(ph_h, thickness_modified),
awc_l_sum = sum(awc_l * thickness_modified),
awc_r_sum = sum(awc_r * thickness_modified),
awc_h_sum = sum(awc_h * thickness_modified),
rock_frag = weighted.mean(rock_frag, thickness_modified),
depth_to_restr = sum(thickness_modified)) %>%
dplyr::mutate(textural_class = aqp::ssc_to_texcl(clay = clay_mean_texture,
sand = sand_mean_texture))
horizon_to_component_data <- dplyr::left_join(summarized_texture_qualifier, weighted_texture)
table(missing_ecosite$areasymbol)
as.data.frame(areasymbol = unique(missing_ecosite$areasymbol), area = unique(missing_ecosite$areaname))
data.frame(areasymbol = unique(missing_ecosite$areasymbol), area = unique(missing_ecosite$areaname))
mlra22 <- c("CA713", "CA760", "CA750", "CA731")
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_surveys & !areasymbol %in% mlra22)
table(missing_ecosite$ecosite_id)
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_surveys) %>% filter(! areasymbol %in% mlra22)
table(missing_ecosite$ecosite_id)
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id))
sonora_area_without_22a <- sonora_surveys[sonora_surveys != mlra22]
sonora_area_without_22a
sonora_surveys
sonora_area_without_22a <- sonora_surveys[!sonora_surveys %in% mlra22]
sonora_area_without_22a
sonora_area_without_22a
length(sonora_surveys)
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_area_without_22a)
table(missing_ecosite$areasymbol)
nrow(missing_ecosite)
table(missing_ecosite$areaname)
sonora_surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv")
sonora_surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv")
surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv", fileEncoding="UTF-8-BOM")
sonora_surveys <- surveys %>% filter(Ownership...Status %in% str_subset(surveys$Ownership...Status, "2-SON")) %>% dplyr::pull(Area.Sym)
length(sonora_surveys)
mlra22 <- c("CA713", "CA760", "CA750", "CA731")
sonora_area_without_22a <- sonora_surveys[!sonora_surveys %in% mlra22]
sonora_area_without_22a
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_area_without_22a)
table(missing_ecosite$ecosite_id)
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind %in% c("series", "family") & areasymbol %in% sonora_area_without_22a)
missing_ecosite
table(missing_ecosite$areasymbol)
table(surveys$Area.Sym)
table(ecosite_report$areasymbol)
sonora_surveys <- surveys %>% filter(Ownership...Status %in% str_subset(surveys$Ownership...Status, "2-SON"))
sonora_surveys
sonora_surveys <- surveys %>% filter(Ownership...Status %in% str_subset(surveys$Ownership...Status, "2-SON")) %>% dplyr::pull(Area.Sym)
mlra22 <- c("CA713", "CA760", "CA750", "CA731")
sonora_area_without_22a <- sonora_surveys[!sonora_surveys %in% mlra22]
sonora_area_without_22a
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind != "miscellaneous" & areasymbol %in% sonora_area_without_22a)
table(missing_ecosite$areasymbol)
nrow(missing_ecosite)
ecosite_report_reduced <- ecosite_report %>% filter(coiid %in% missing_ecosite$coiid)
table(missing_ecosite$compname)
as.data.frame(table(missing_ecosite$compname))
ecosite_report %>% filter(compname == "Archerdale")
missing_comp_names <- unique(missing_ecosite$compname)
missing_list <- list()
missing_list <- list()
for(i in missing_comp_names){
missing_list[[i]] <- ecosite_report %>% dplyr::filter(compname == i)
}
missing_list$Pentz
missing_list$Mckeonhills
nasis_selection <- subset(nasis_selection, compkind != "miscellaneous area" &
majcompflag == "1")
library(sf)
library(aqp)
library(dplyr)
library(soilDB)
library(stringr)
# nasis_selection <- fetchNASIS(from = "components", rmHzErrors = FALSE)
nasis_selection <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
nasis_selection <- subset(nasis_selection, compkind != "miscellaneous area" &
majcompflag == "1")
horizon_df <- data.frame(component = nasis_selection$coiid,
texture = nasis_selection$texture,
frag_vol = nasis_selection$fragvoltot_r,
sand = nasis_selection$sandtotal_r,
clay = nasis_selection$claytotal_r,
sieve10 = nasis_selection$sieveno10_r,
thickness = nasis_selection$hzdepb_r - nasis_selection$hzdept_r,
rock_frag = nasis_selection$total_frags_pct,
ph_l = nasis_selection$ph1to1h2o_l,
ph_r = nasis_selection$ph1to1h2o_r,
ph_h = nasis_selection$ph1to1h2o_h,
awc_l = nasis_selection$awc_l,
awc_r = nasis_selection$awc_r,
awc_h = nasis_selection$awc_h)
horizon_df$texture_qualifier <- horizon_df$texture %>% str_extract(".*(?=-)")
horizon_df$texture_only <- horizon_df$texture %>% str_extract("(?<=-).*")
horizon_df$texture_only <- ifelse(is.na(horizon_df$texture_only), horizon_df$texture, horizon_df$texture_only)
horizon_df$thickness_modified <- ifelse(is.na(horizon_df$clay), 0.1, ifelse(horizon_df$texture == "BR", 0.1, horizon_df$thickness))
summarized_texture_qualifier <- horizon_df %>%
dplyr::group_by(component, texture_qualifier) %>%
dplyr::summarize(combined_thickness = sum(thickness_modified)) %>%
dplyr::ungroup() %>%
dplyr::group_by(component) %>%
top_n(1, combined_thickness) %>% ungroup() %>%
dplyr::select(-combined_thickness)
weighted_texture <- horizon_df %>%
dplyr::filter(!is.na(clay) & !is.na(sand) & texture != "BR") %>%
dplyr::group_by(component) %>%
dplyr::summarise(clay_mean_texture = weighted.mean(clay, thickness_modified),
sand_mean_texture = weighted.mean(sand, thickness_modified),
ph_l_mean = weighted.mean(ph_l, thickness_modified),
ph_r_mean = weighted.mean(ph_r, thickness_modified),
ph_h_mean = weighted.mean(ph_h, thickness_modified),
awc_l_sum = sum(awc_l * thickness_modified),
awc_r_sum = sum(awc_r * thickness_modified),
awc_h_sum = sum(awc_h * thickness_modified),
rock_frag = weighted.mean(rock_frag, thickness_modified),
depth_to_restr = sum(thickness_modified)) %>%
dplyr::mutate(textural_class = aqp::ssc_to_texcl(clay = clay_mean_texture,
sand = sand_mean_texture))
horizon_to_component_data <- dplyr::left_join(summarized_texture_qualifier, weighted_texture)
component_data <-
with(site(nasis_selection),
data.frame(
coiid = coiid,
compname = compname,
compkind = compkind,
areasymbol = areasymbol,
areaname = areaname,
ssastatus = ssastatus,
comppct_r = comppct_r,
slope_l = slope_l,
slope_r = slope_r,
slope_h = slope_h,
majcompflag = majcompflag,
pmkind = pmkind,
dmuiid = dmuiid,
pmorigin = pmorigin,
surf_frag = surface_total_frags_pct,
elev_l = elev_l,
elev_rv = elev_r,
elev_h = elev_h,
map_l = map_l,
map_rv = map_r,
map_h = map_h,
maat_l = maat_l,
maat_rv = maat_r,
maat_h = maat_h,
ffd_l = ffd_l,
ffd_rv = ffd_r,
ffd_h = ffd_h,
aspectccwise = aspectccwise,
aspectrep = aspectrep,
aspectcwise = aspectcwise,
landform = landform_string,
taxtemp = taxtempregime,
drainagecl = drainagecl,
ecosite = ecosite_name,
ecosite_id = ecosite_id,
taxorder = taxorder,
taxsuborder = taxsuborder
)
)
restriction_data <- restrictions(nasis_selection) %>%
dplyr::select(coiid, reskind, resdept_l, resdept_r, resdept_h, reshard) %>%
subset(!grepl("noncemented", reshard)) %>%
dplyr::group_by(coiid) %>%
arrange(resdept_r) %>%
dplyr::slice(1)
restriction_data$coiid <- as.character(restriction_data$coiid)
component_data <- left_join(component_data, restriction_data)
all_data <- horizon_to_component_data %>%
dplyr::rename(coiid = component) %>%
left_join(component_data) %>%
dplyr::select(coiid,  compname, ecosite, ecosite_id, landform, pmkind, pmorigin, taxtemp, textural_class,
texture_qualifier, rock_frag, surf_frag, depth_to_restr, drainagecl, slope_l, slope_r,
slope_h, ph_l_mean, ph_r_mean, ph_h_mean, elev_l, elev_rv, elev_h,
map_l, map_rv, map_h, maat_l, maat_rv, maat_h, ffd_l, ffd_rv, ffd_h ,comppct_r, dmuiid, everything())
write.csv(all_data, "C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv",
row.names = FALSE)
library(dplyr)
library(stringr)
library(randomForest)
ecosite_report  <-
read.csv("C:/Users/Nathan.Roe/Downloads/my_ecosite_report.csv")
surveys <- read.csv("C:/Users/Nathan.Roe/Documents/PES4ever/sonora_survey_areas.csv", fileEncoding="UTF-8-BOM")
sonora_surveys <- surveys %>% filter(Ownership...Status %in% str_subset(surveys$Ownership...Status, "2-SON")) %>% dplyr::pull(Area.Sym)
mlra22 <- c("CA713", "CA760", "CA750", "CA731")
sonora_area_without_22a <- sonora_surveys[!sonora_surveys %in% mlra22]
sonora_area_without_22a
missing_ecosite <- ecosite_report %>% filter(is.na(ecosite_id) & compkind != "miscellaneous" & areasymbol %in% sonora_area_without_22a)
table(missing_ecosite$areasymbol)
table(missing_ecosite$compname)
missing_comp_names <- unique(missing_ecosite$compname)
missing_list <- list()
for(i in missing_comp_names){
missing_list[[i]] <- ecosite_report %>% dplyr::filter(compname == i)
}
ecosite_report %>% filter(compname == "Archerdale")
as.data.frame(table(missing_ecosite$compname)) %>% dplyr::rename(CompName = Var1, NumbMissing = Freq) %>% left_join()
Toms_accounting <- read.csv("S:/NRCS/190 ECS Ecological Sciences/190-24 Ecological Sites/PES/Review Process 2022/2-SON/ES-Accounting_2-SON_all.csv")
head(Toms_accounting)
Toms_missing <- Toms_accounting %>% filter(Comp.ID %in% missing_ecosite$coiid)
nrow(missing_ecosite)
nrow(Toms_missing)
colnames(Toms_missing)
nasis_selection$areaacres
nrow(Toms_accounting)
Toms_missing <- Toms_accounting %>% filter(Comp.ID %in% missing_ecosite$coiid)
nrow(Toms_missing)
nrow(missing_ecosite)
View(missing_ecosite)
esd_note <- missing_ecosite %>% select(coiid)
esd_note$author <- "Nathan Roe"
write.csv(missing_ecosite, file = "C:/Users/Nathan.Roe/Documents/PES4ever")
colnames(Toms_accounting)
write.csv(missing_ecosite, file = "C:/Users/Nathan.Roe/Documents/PES4ever/mlra18_missing_ecosites.csv")
write.csv(missing_ecosite, file = "C:/Users/Nathan.Roe/Documents/PES4ever/mlra18_missing_ecosites.csv", row.names = FALSE)
View(missing_list$Archerdale)
View(missing_list$`Argonaut variant`)
View(missing_list$Arpatutu)
View(missing_list$Capay)
length(intersect(sonora_area_without_22a, unique(missing_list$Capay$areasymbol)))
length(missing_list$Capay$areasymbol)
length(unique(missing_list$Capay$areasymbol))
View(missing_list$Capay %>% filter(areasymbol == "CA618"))
View(missing_list$Capay %>% filter(areasymbol == "CA632"))
View(missing_list$Conejo)
View(nasis_selection@site %>% filter(coiid == 623699))
nasis_selection@site$dmudesc
nasis_selection@site$dmuinvesintens
nasis_selection@site$dmudesc
sum(is.na(nasis_selection$areasymbol))
nrow(nasis_selection@site)
140/6719
View(missing_list$Delhi)
View(missing_list$Delhi)
View(missing_list$Dubakella)
View(missing_list$Fluvaquents)
View(missing_list$Hideaway)
View(missing_list$Hotaw)
View(missing_list$Mariposa)
View(missing_list$Mckeonhills)
View(missing_list$Pentz)
View(missing_list$Peters)
View(missing_list$Redding)
View(missing_list$Sheepranch)
ecosite_report %>% filter(compkind != "miscellaneous" & areasymbol %in% sonora_area_without_22a)
library(dplyr)
ecosite_report %>% filter(compkind != "miscellaneous" & areasymbol %in% sonora_area_without_22a)
ecosite_report %>% filter(compkind != "miscellaneous" & areasymbol %in% sonora_area_without_22a) %>% View()
remotes::install_github("ncss-tech/soilDB", dependencies = FALSE)
nonrep_with_ecosite <- aqp::site(my.components.MLRA) %>% filter(repdmu == 0 & !is.na(ecosite_id))
library(soilDB)
library(dplyr)
library(aqp)
library(sf)
library(stringr)
library(ggplot2)
library(maps)
nonrep_with_ecosite <- aqp::site(my.components.MLRA) %>% filter(repdmu == 0 & !is.na(ecosite_id))
my.components.MLRA <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
nonrep_with_ecosite <- aqp::site(my.components.MLRA) %>% filter(repdmu == 0 & !is.na(ecosite_id))
my.components.MLRA <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/components18.sqlite", SS = FALSE)
library(soilDB)
library(dplyr)
library(aqp)
library(sf)
library(stringr)
library(ggplot2)
library(maps)
library(soilDB)
my.mapunits.SSA <- fetchNASIS(from = "components", dsn = "C:/Users/Nathan.Roe/Documents/ESS-FAQ/SQlite_tables/componentsSSA792.sqlite", SS = FALSE)
head(my.components.SSA$)
head(my.mapunits.SSA$muname)
