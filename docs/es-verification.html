<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 ES Verification | NRCS Ecologist FAQs</title>
  <meta name="description" content="This is a compilation of FAQs for NRCS Ecologists." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 ES Verification | NRCS Ecologist FAQs" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a compilation of FAQs for NRCS Ecologists." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 ES Verification | NRCS Ecologist FAQs" />
  
  <meta name="twitter:description" content="This is a compilation of FAQs for NRCS Ecologists." />
  

<meta name="author" content="Nathan Roe - nateroe@gmail.com" />


<meta name="date" content="2025-03-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="nasis.html"/>
<link rel="next" href="package-buildingmaintaining-tips.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ESS FAQs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#odbc-connection"><i class="fa fa-check"></i><b>1.2</b> ODBC Connection</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#standard"><i class="fa fa-check"></i><b>1.3</b> Standard dataset/packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mapunits.html"><a href="mapunits.html"><i class="fa fa-check"></i><b>2</b> Mapunits</a>
<ul>
<li class="chapter" data-level="2.1" data-path="mapunits.html"><a href="mapunits.html#mapunitsinMLRA"><i class="fa fa-check"></i><b>2.1</b> What mapunits are in an MLRA?</a></li>
<li class="chapter" data-level="2.2" data-path="mapunits.html"><a href="mapunits.html#mapunitsinSSA"><i class="fa fa-check"></i><b>2.2</b> What mapunits are in a Soil Survey Area?</a></li>
<li class="chapter" data-level="2.3" data-path="mapunits.html"><a href="mapunits.html#mapping-mapunits"><i class="fa fa-check"></i><b>2.3</b> Mapping mapunits</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="components.html"><a href="components.html"><i class="fa fa-check"></i><b>3</b> Components</a>
<ul>
<li class="chapter" data-level="3.1" data-path="components.html"><a href="components.html#componentsinMLRA"><i class="fa fa-check"></i><b>3.1</b> Identify components in MLRA?</a></li>
<li class="chapter" data-level="3.2" data-path="components.html"><a href="components.html#identify-components-in-soil-survey-area"><i class="fa fa-check"></i><b>3.2</b> Identify components in Soil Survey Area?</a></li>
<li class="chapter" data-level="3.3" data-path="components.html"><a href="components.html#existing-component-ecosite-correlations"><i class="fa fa-check"></i><b>3.3</b> Existing component, ecosite correlations</a></li>
<li class="chapter" data-level="3.4" data-path="components.html"><a href="components.html#components-correlated-to-an-ecosite-of-interest"><i class="fa fa-check"></i><b>3.4</b> Components correlated to an ecosite of interest?</a></li>
<li class="chapter" data-level="3.5" data-path="components.html"><a href="components.html#ecological-characteristics-of-components-non-programmatic"><i class="fa fa-check"></i><b>3.5</b> Ecological characteristics of components? (non-programmatic)</a></li>
<li class="chapter" data-level="3.6" data-path="components.html"><a href="components.html#ecological-characteristics-of-components-programmatic"><i class="fa fa-check"></i><b>3.6</b> Ecological characteristics of components? (programmatic)</a></li>
<li class="chapter" data-level="3.7" data-path="components.html"><a href="components.html#where-do-components-occur"><i class="fa fa-check"></i><b>3.7</b> Where do components occur?</a></li>
<li class="chapter" data-level="3.8" data-path="components.html"><a href="components.html#how-to-correlate-components-to-ecosites"><i class="fa fa-check"></i><b>3.8</b> How to correlate components to ecosites?</a></li>
<li class="chapter" data-level="3.9" data-path="components.html"><a href="components.html#how-to-qc-the-correlation-between"><i class="fa fa-check"></i><b>3.9</b> How to QC the correlation between</a></li>
<li class="chapter" data-level="3.10" data-path="components.html"><a href="components.html#test-section"><i class="fa fa-check"></i><b>3.10</b> Test section</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ecosites.html"><a href="ecosites.html"><i class="fa fa-check"></i><b>4</b> Ecosites</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ecosites.html"><a href="ecosites.html#what-ecosites-are-active-in-an-mlra"><i class="fa fa-check"></i><b>4.1</b> What ecosites are active in an MLRA?</a></li>
<li class="chapter" data-level="4.2" data-path="ecosites.html"><a href="ecosites.html#range-in-characteristics-of-ecosites"><i class="fa fa-check"></i><b>4.2</b> Range in characteristics of ecosites</a></li>
<li class="chapter" data-level="4.3" data-path="ecosites.html"><a href="ecosites.html#mapping-ecological-sites"><i class="fa fa-check"></i><b>4.3</b> Mapping ecological sites</a></li>
<li class="chapter" data-level="4.4" data-path="ecosites.html"><a href="ecosites.html#climate"><i class="fa fa-check"></i><b>4.4</b> Climate</a></li>
<li class="chapter" data-level="4.5" data-path="ecosites.html"><a href="ecosites.html#associated-sites"><i class="fa fa-check"></i><b>4.5</b> Associated sites</a></li>
<li class="chapter" data-level="4.6" data-path="ecosites.html"><a href="ecosites.html#determine-acreage-of-single-ecological-site"><i class="fa fa-check"></i><b>4.6</b> Determine acreage of single ecological site</a></li>
<li class="chapter" data-level="4.7" data-path="ecosites.html"><a href="ecosites.html#determine-acreage-of-multiple-ecological-sites"><i class="fa fa-check"></i><b>4.7</b> Determine acreage of multiple ecological sites</a></li>
<li class="chapter" data-level="4.8" data-path="ecosites.html"><a href="ecosites.html#plotveg"><i class="fa fa-check"></i><b>4.8</b> Accessing plot level vegetation data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="species.html"><a href="species.html"><i class="fa fa-check"></i><b>5</b> Species</a>
<ul>
<li class="chapter" data-level="5.1" data-path="species.html"><a href="species.html#creating-a-species-list"><i class="fa fa-check"></i><b>5.1</b> Creating a species list</a></li>
<li class="chapter" data-level="5.2" data-path="species.html"><a href="species.html#working-with-vegetation-data"><i class="fa fa-check"></i><b>5.2</b> Working with vegetation data</a></li>
<li class="chapter" data-level="5.3" data-path="species.html"><a href="species.html#mapping-the-location-of-species"><i class="fa fa-check"></i><b>5.3</b> Mapping the location of species</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nasis.html"><a href="nasis.html"><i class="fa fa-check"></i><b>6</b> NASIS</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nasis.html"><a href="nasis.html#creating-a-static-nasis-database"><i class="fa fa-check"></i><b>6.1</b> Creating a Static NASIS database</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="es-verification.html"><a href="es-verification.html"><i class="fa fa-check"></i><b>7</b> ES Verification</a>
<ul>
<li class="chapter" data-level="7.1" data-path="es-verification.html"><a href="es-verification.html#prioritization"><i class="fa fa-check"></i><b>7.1</b> Prioritization</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="es-verification.html"><a href="es-verification.html#guidance-from-national-instruction"><i class="fa fa-check"></i><b>7.1.1</b> Guidance from National Instruction</a></li>
<li class="chapter" data-level="7.1.2" data-path="es-verification.html"><a href="es-verification.html#goal-of-with-workflow"><i class="fa fa-check"></i><b>7.1.2</b> Goal of with workflow</a></li>
<li class="chapter" data-level="7.1.3" data-path="es-verification.html"><a href="es-verification.html#querying-nasis"><i class="fa fa-check"></i><b>7.1.3</b> Querying NASIS</a></li>
<li class="chapter" data-level="7.1.4" data-path="es-verification.html"><a href="es-verification.html#run-workflow"><i class="fa fa-check"></i><b>7.1.4</b> Run workflow</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="package-buildingmaintaining-tips.html"><a href="package-buildingmaintaining-tips.html"><i class="fa fa-check"></i><b>8</b> Package building/maintaining tips</a>
<ul>
<li class="chapter" data-level="8.1" data-path="package-buildingmaintaining-tips.html"><a href="package-buildingmaintaining-tips.html#package-buildingmaintaining-tips-1"><i class="fa fa-check"></i><b>8.1</b> Package building/maintaining tips</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="random-tools.html"><a href="random-tools.html"><i class="fa fa-check"></i><b>9</b> Random tools</a>
<ul>
<li class="chapter" data-level="9.1" data-path="random-tools.html"><a href="random-tools.html#organizing-scanned-data"><i class="fa fa-check"></i><b>9.1</b> Organizing scanned data</a></li>
<li class="chapter" data-level="9.2" data-path="random-tools.html"><a href="random-tools.html#comparing-bray-curtis-and-jaccard-dissimilarity-measures"><i class="fa fa-check"></i><b>9.2</b> Comparing Bray-Curtis and Jaccard (dis)similarity measures</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NRCS Ecologist FAQs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="es-verification" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> ES Verification<a href="es-verification.html#es-verification" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="prioritization" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Prioritization<a href="es-verification.html#prioritization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="guidance-from-national-instruction" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Guidance from National Instruction<a href="es-verification.html#guidance-from-national-instruction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section is intended to assist with ES Verification projects. The National Instruction with full details of verification project requirements can be accessed here - <a href="https://raw.githubusercontent.com/natearoe/ESS_FAQs/main/_book/Title_430_NI.pdf">Part 306 – Ecological Site Inventory and Ecological Site Description</a>.</p>
<p>This workflow addresses many of the requirements outlined section 306.6.C.2 from the National Instruction, shown in the photo below:</p>
<div class="float">
<img src="images/ES_verification_instruction.JPG" alt="306.6.C.2 from National Instruction" />
<div class="figcaption">306.6.C.2 from National Instruction</div>
</div>
</div>
<div id="goal-of-with-workflow" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Goal of with workflow<a href="es-verification.html#goal-of-with-workflow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The goal of this methodology is to determine what data is available to use for ES Verification Projects. It reports on data elements listed in the ES Verification standards as well as other elements that are not required but are indicative of data quality, including:</p>
<ul>
<li>correlated pedons &amp; vegplots (including whether they are colocated)</li>
<li>use of states and phases</li>
<li>canopy cover by species (plant symbol &amp; cover)</li>
<li>strata</li>
<li>number components correlated to ecosite</li>
<li>number of acres</li>
<li>component pedons</li>
<li>taxonomic level (i.e., series, family, taxadjunct, etc.)</li>
</ul>
<p>There are two main outputs. For both of the visuals below there are more columns than are able to be shown:</p>
<ol style="list-style-type: decimal">
<li>The first shows the amount of supporting data for the ecosites in your MLRA.</li>
</ol>
<p><img src="images/ES_verification_ecosite_level_output.JPG" /></p>
<ol start="2" style="list-style-type: decimal">
<li>The second allows users to look at specific ecosites and determine what sites have the best data and could be used as supporting evidence of the ES.</li>
</ol>
<p><img src="images/ES_verification_site_level.JPG" /></p>
</div>
<div id="querying-nasis" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Querying NASIS<a href="es-verification.html#querying-nasis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This process requires two different NASIS queries. First to access site/pedon/vegplot data, and the other to access component data associated with your MLRA.</p>
<p>Before getting started, clear selected set.</p>
<p><strong>Query 1 (site/pedon/vegetation plot)</strong>
Run “SSRO_Southwest &gt; Sites by ecositeid with %” (not listed as ready for use) using an appropriate pattern for Ecological Site ID (e.g., %018X% for MLRA18)</p>
<p><strong>Query 2 (components)</strong>
Use <a href="https://nroe.shinyapps.io/MapunitsInMLRA/" class="uri">https://nroe.shinyapps.io/MapunitsInMLRA/</a> to access all mukeys in your MLRA of interest. Mukeys are batched into groups of 2100 parameters on each tab, as this is the limit that NASIS accepts as arguments in a query. Read the instructions on the page for details. If multiple tabs are populated, the query will have to be run multiple times. Use these mukeys as input into “NSSC Pangaea &gt; Area/Legend/Mapunit/DMU by record ID - LMAPUNITIID”.</p>
</div>
<div id="run-workflow" class="section level3 hasAnchor" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> Run workflow<a href="es-verification.html#run-workflow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Access data from NASIS</strong></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="es-verification.html#cb89-1" tabindex="-1"></a><span class="co"># library</span></span>
<span id="cb89-2"><a href="es-verification.html#cb89-2" tabindex="-1"></a><span class="fu">library</span>(soilDB)</span>
<span id="cb89-3"><a href="es-verification.html#cb89-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb89-4"><a href="es-verification.html#cb89-4" tabindex="-1"></a></span>
<span id="cb89-5"><a href="es-verification.html#cb89-5" tabindex="-1"></a><span class="co"># access veg data</span></span>
<span id="cb89-6"><a href="es-verification.html#cb89-6" tabindex="-1"></a>MLRA18_veg <span class="ot">&lt;-</span> ecositer<span class="sc">::</span><span class="fu">create_veg_df</span>(<span class="at">from =</span> <span class="st">&quot;SS&quot;</span>)</span>
<span id="cb89-7"><a href="es-verification.html#cb89-7" tabindex="-1"></a><span class="co"># access pedon data</span></span>
<span id="cb89-8"><a href="es-verification.html#cb89-8" tabindex="-1"></a>MLRA18_pedons <span class="ot">&lt;-</span> <span class="fu">fetchNASIS</span>(<span class="at">from =</span> <span class="st">&quot;pedons&quot;</span>)</span>
<span id="cb89-9"><a href="es-verification.html#cb89-9" tabindex="-1"></a><span class="co"># access component data</span></span>
<span id="cb89-10"><a href="es-verification.html#cb89-10" tabindex="-1"></a>MLRA18_components <span class="ot">&lt;-</span> <span class="fu">fetchNASIS</span>(<span class="at">from =</span> <span class="st">&quot;components&quot;</span>,</span>
<span id="cb89-11"><a href="es-verification.html#cb89-11" tabindex="-1"></a>                                <span class="at">fill =</span> <span class="cn">TRUE</span>,</span>
<span id="cb89-12"><a href="es-verification.html#cb89-12" tabindex="-1"></a>                                <span class="at">duplicates =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-13"><a href="es-verification.html#cb89-13" tabindex="-1"></a></span>
<span id="cb89-14"><a href="es-verification.html#cb89-14" tabindex="-1"></a><span class="co"># access component pedon data - you will be notified that, &quot;some linked pedons not in selected set or local database&quot;</span></span>
<span id="cb89-15"><a href="es-verification.html#cb89-15" tabindex="-1"></a>MLRA18_component_pedons <span class="ot">&lt;-</span> soilDB<span class="sc">::</span><span class="fu">get_copedon_from_NASIS_db</span>()</span></code></pre></div>
<p><strong>Summarize data</strong></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="es-verification.html#cb90-1" tabindex="-1"></a><span class="co"># Manipulating data ------------------------------------------------------</span></span>
<span id="cb90-2"><a href="es-verification.html#cb90-2" tabindex="-1"></a></span>
<span id="cb90-3"><a href="es-verification.html#cb90-3" tabindex="-1"></a></span>
<span id="cb90-4"><a href="es-verification.html#cb90-4" tabindex="-1"></a><span class="co"># aggregate abundance columns</span></span>
<span id="cb90-5"><a href="es-verification.html#cb90-5" tabindex="-1"></a>MLRA18_veg_agg <span class="ot">&lt;-</span> ecositer<span class="sc">::</span><span class="fu">QC_aggregate_abundance</span>(<span class="at">veg_df =</span> MLRA18_veg)</span>
<span id="cb90-6"><a href="es-verification.html#cb90-6" tabindex="-1"></a></span>
<span id="cb90-7"><a href="es-verification.html#cb90-7" tabindex="-1"></a><span class="co"># select component columns of interest and calculate comp_acres</span></span>
<span id="cb90-8"><a href="es-verification.html#cb90-8" tabindex="-1"></a>MLRA18_components_mod <span class="ot">&lt;-</span> MLRA18_components <span class="sc">|&gt;</span> aqp<span class="sc">::</span><span class="fu">site</span>() <span class="sc">|&gt;</span></span>
<span id="cb90-9"><a href="es-verification.html#cb90-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(mukey, coiid, compname, majcompflag, compkind, ecosite_id, muacres, comppct_r) <span class="sc">|&gt;</span></span>
<span id="cb90-10"><a href="es-verification.html#cb90-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">comp_acres =</span> muacres <span class="sc">*</span> comppct_r<span class="sc">/</span><span class="dv">100</span>,</span>
<span id="cb90-11"><a href="es-verification.html#cb90-11" tabindex="-1"></a>                <span class="at">ecositeid =</span> ecosite_id)</span>
<span id="cb90-12"><a href="es-verification.html#cb90-12" tabindex="-1"></a></span>
<span id="cb90-13"><a href="es-verification.html#cb90-13" tabindex="-1"></a></span>
<span id="cb90-14"><a href="es-verification.html#cb90-14" tabindex="-1"></a><span class="co"># Joining data -----------------------------------------------------------</span></span>
<span id="cb90-15"><a href="es-verification.html#cb90-15" tabindex="-1"></a></span>
<span id="cb90-16"><a href="es-verification.html#cb90-16" tabindex="-1"></a></span>
<span id="cb90-17"><a href="es-verification.html#cb90-17" tabindex="-1"></a><span class="co"># join component pedons to pedons</span></span>
<span id="cb90-18"><a href="es-verification.html#cb90-18" tabindex="-1"></a>MLRA18_pedons_coped <span class="ot">&lt;-</span> aqp<span class="sc">::</span><span class="fu">site</span>(MLRA18_pedons) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(MLRA18_component_pedons <span class="sc">|&gt;</span></span>
<span id="cb90-19"><a href="es-verification.html#cb90-19" tabindex="-1"></a>                                               dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">peiid =</span> <span class="fu">as.character</span>(peiid)) <span class="sc">|&gt;</span></span>
<span id="cb90-20"><a href="es-verification.html#cb90-20" tabindex="-1"></a>                                               dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>upedonid))</span>
<span id="cb90-21"><a href="es-verification.html#cb90-21" tabindex="-1"></a></span>
<span id="cb90-22"><a href="es-verification.html#cb90-22" tabindex="-1"></a></span>
<span id="cb90-23"><a href="es-verification.html#cb90-23" tabindex="-1"></a><span class="co"># join pedon data to veg data</span></span>
<span id="cb90-24"><a href="es-verification.html#cb90-24" tabindex="-1"></a>MLRA18_veg_peiid <span class="ot">&lt;-</span> MLRA18_veg_agg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(MLRA18_pedons_coped <span class="sc">|&gt;</span></span>
<span id="cb90-25"><a href="es-verification.html#cb90-25" tabindex="-1"></a>                                     dplyr<span class="sc">::</span><span class="fu">select</span>(siteobsiid, peiid, coiid, pedon_id, representative, rvindicator) <span class="sc">|&gt;</span></span>
<span id="cb90-26"><a href="es-verification.html#cb90-26" tabindex="-1"></a>                                     dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">siteobsiid =</span> <span class="fu">as.character</span>(siteobsiid)) <span class="sc">|&gt;</span></span>
<span id="cb90-27"><a href="es-verification.html#cb90-27" tabindex="-1"></a>                                     <span class="fu">unique</span>() <span class="sc">|&gt;</span></span>
<span id="cb90-28"><a href="es-verification.html#cb90-28" tabindex="-1"></a>                                       dplyr<span class="sc">::</span><span class="fu">group_by</span>(siteobsiid) <span class="sc">|&gt;</span></span>
<span id="cb90-29"><a href="es-verification.html#cb90-29" tabindex="-1"></a>                                       dplyr<span class="sc">::</span><span class="fu">arrange</span>(pedon_id) <span class="sc">|&gt;</span></span>
<span id="cb90-30"><a href="es-verification.html#cb90-30" tabindex="-1"></a>                                       dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb90-31"><a href="es-verification.html#cb90-31" tabindex="-1"></a></span>
<span id="cb90-32"><a href="es-verification.html#cb90-32" tabindex="-1"></a></span>
<span id="cb90-33"><a href="es-verification.html#cb90-33" tabindex="-1"></a><span class="co"># Summarizing data -------------------------------------------------------</span></span>
<span id="cb90-34"><a href="es-verification.html#cb90-34" tabindex="-1"></a></span>
<span id="cb90-35"><a href="es-verification.html#cb90-35" tabindex="-1"></a>MLRA18_triage <span class="ot">&lt;-</span> MLRA18_veg_peiid <span class="sc">|&gt;</span></span>
<span id="cb90-36"><a href="es-verification.html#cb90-36" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(ecositeid, siteiid, siteobsiid, vegplotiid, peiid, pedon_id, representative, ecostateid, commphaseid) <span class="sc">|&gt;</span></span>
<span id="cb90-37"><a href="es-verification.html#cb90-37" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">overcanclass =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(overstorycancovtotalclass)),</span>
<span id="cb90-38"><a href="es-verification.html#cb90-38" tabindex="-1"></a>                   <span class="at">totcanclass =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(cancovtotalclass)),</span>
<span id="cb90-39"><a href="es-verification.html#cb90-39" tabindex="-1"></a>                   <span class="at">heighclasslow =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(plantheightcllowerlimit)),</span>
<span id="cb90-40"><a href="es-verification.html#cb90-40" tabindex="-1"></a>                   <span class="at">heighclasshigh =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(plantheightclupperlimit)),</span>
<span id="cb90-41"><a href="es-verification.html#cb90-41" tabindex="-1"></a>                   <span class="at">planttypegroup =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(planttypegroup)),</span>
<span id="cb90-42"><a href="es-verification.html#cb90-42" tabindex="-1"></a>                   <span class="at">akstratumclass =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(akstratumcoverclass)),</span>
<span id="cb90-43"><a href="es-verification.html#cb90-43" tabindex="-1"></a>                   <span class="at">vegstrata =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(vegetationstratalevel)),</span>
<span id="cb90-44"><a href="es-verification.html#cb90-44" tabindex="-1"></a>                   <span class="at">plantsym =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(plantsym)),</span>
<span id="cb90-45"><a href="es-verification.html#cb90-45" tabindex="-1"></a>                   <span class="at">speciescancov =</span> <span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(pct_cover)))</span>
<span id="cb90-46"><a href="es-verification.html#cb90-46" tabindex="-1"></a></span>
<span id="cb90-47"><a href="es-verification.html#cb90-47" tabindex="-1"></a>MLRA18_triage_summary <span class="ot">&lt;-</span> MLRA18_triage <span class="sc">|&gt;</span></span>
<span id="cb90-48"><a href="es-verification.html#cb90-48" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">plant_abund =</span> plantsym <span class="sc">+</span> speciescancov,</span>
<span id="cb90-49"><a href="es-verification.html#cb90-49" tabindex="-1"></a>                <span class="at">heightlimit =</span> heighclasslow <span class="sc">+</span> heighclasshigh) <span class="sc">|&gt;</span></span>
<span id="cb90-50"><a href="es-verification.html#cb90-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">plant_abund_logic =</span> <span class="fu">ifelse</span>(plant_abund <span class="sc">==</span> <span class="dv">2</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb90-51"><a href="es-verification.html#cb90-51" tabindex="-1"></a>                <span class="at">heightlimit_logic =</span> <span class="fu">ifelse</span>(heightlimit <span class="sc">==</span> <span class="dv">2</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb90-52"><a href="es-verification.html#cb90-52" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">strata =</span> heightlimit_logic <span class="sc">+</span> planttypegroup <span class="sc">+</span> akstratumclass <span class="sc">+</span> vegstrata) <span class="sc">|&gt;</span></span>
<span id="cb90-53"><a href="es-verification.html#cb90-53" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">strata_logic =</span> <span class="fu">ifelse</span>(strata <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb90-54"><a href="es-verification.html#cb90-54" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">sum_logic =</span> <span class="fu">sum</span>(<span class="fu">c</span>(plant_abund_logic,</span>
<span id="cb90-55"><a href="es-verification.html#cb90-55" tabindex="-1"></a>                                  strata_logic,</span>
<span id="cb90-56"><a href="es-verification.html#cb90-56" tabindex="-1"></a>                                  overcanclass,</span>
<span id="cb90-57"><a href="es-verification.html#cb90-57" tabindex="-1"></a>                                  totcanclass))) <span class="sc">|&gt;</span></span>
<span id="cb90-58"><a href="es-verification.html#cb90-58" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">sum_logic_no_can =</span> <span class="fu">sum</span>(<span class="fu">c</span>(plant_abund_logic,</span>
<span id="cb90-59"><a href="es-verification.html#cb90-59" tabindex="-1"></a>                                         strata_logic)))</span>
<span id="cb90-60"><a href="es-verification.html#cb90-60" tabindex="-1"></a></span>
<span id="cb90-61"><a href="es-verification.html#cb90-61" tabindex="-1"></a>MLRA18_ecosite_triage_summary <span class="ot">&lt;-</span></span>
<span id="cb90-62"><a href="es-verification.html#cb90-62" tabindex="-1"></a>  MLRA18_triage_summary <span class="sc">|&gt;</span></span>
<span id="cb90-63"><a href="es-verification.html#cb90-63" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(ecositeid) <span class="sc">|&gt;</span></span>
<span id="cb90-64"><a href="es-verification.html#cb90-64" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">pedons =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(peiid)),</span>
<span id="cb90-65"><a href="es-verification.html#cb90-65" tabindex="-1"></a>                   <span class="at">ecostateid =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(ecostateid)),</span>
<span id="cb90-66"><a href="es-verification.html#cb90-66" tabindex="-1"></a>                   <span class="at">commphaseid =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(commphaseid)),</span>
<span id="cb90-67"><a href="es-verification.html#cb90-67" tabindex="-1"></a>                   <span class="at">plant_abund =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(plant_abund_logic)),</span>
<span id="cb90-68"><a href="es-verification.html#cb90-68" tabindex="-1"></a>                   <span class="at">strata =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(strata_logic))) <span class="sc">|&gt;</span></span>
<span id="cb90-69"><a href="es-verification.html#cb90-69" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(MLRA18_components_mod) <span class="sc">|&gt;</span></span>
<span id="cb90-70"><a href="es-verification.html#cb90-70" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(ecositeid, pedons, ecostateid, commphaseid, plant_abund,</span>
<span id="cb90-71"><a href="es-verification.html#cb90-71" tabindex="-1"></a>                  strata) <span class="sc">|&gt;</span></span>
<span id="cb90-72"><a href="es-verification.html#cb90-72" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">components =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(coiid)),</span>
<span id="cb90-73"><a href="es-verification.html#cb90-73" tabindex="-1"></a>                   <span class="at">acres =</span> <span class="fu">sum</span>(comp_acres, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-74"><a href="es-verification.html#cb90-74" tabindex="-1"></a>                   <span class="at">majcomp =</span> <span class="fu">sum</span>(majcompflag, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-75"><a href="es-verification.html#cb90-75" tabindex="-1"></a>                   <span class="at">series =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;series&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-76"><a href="es-verification.html#cb90-76" tabindex="-1"></a>                   <span class="at">taxadjunct =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;taxadjunct&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-77"><a href="es-verification.html#cb90-77" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;family&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-78"><a href="es-verification.html#cb90-78" tabindex="-1"></a>                   <span class="at">tax_above_fam =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;taxon above family&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-79"><a href="es-verification.html#cb90-79" tabindex="-1"></a>                   <span class="at">variant =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;variant&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-80"><a href="es-verification.html#cb90-80" tabindex="-1"></a>                   <span class="at">misc =</span> <span class="fu">sum</span>(compkind <span class="sc">==</span> <span class="st">&quot;miscellaneous area&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="es-verification.html#cb91-1" tabindex="-1"></a><span class="fu">head</span>(MLRA18_ecosite_triage_summary)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 15
## # Groups:   ecositeid, pedons, ecostateid,
## #   commphaseid, plant_abund [6]
##   ecositeid   pedons ecostateid commphaseid plant_abund strata components  acres
##   &lt;chr&gt;        &lt;int&gt;      &lt;int&gt;       &lt;int&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;  &lt;dbl&gt;
## 1 F001XA001WA      0          0           0           1      1          0 0     
## 2 F018XA201CA      0          0           0          54     54         66 3.29e4
## 3 F018XA202CA      0          0           0          76     76         26 7.00e4
## 4 F018XC110CA      1          1           1           1      1          0 0     
## 5 F018XC201CA     22         13          11         383    383        210 4.71e5
## 6 F018XC203CA     20          9           8          48     48         20 2.29e4
## # ℹ 7 more variables: majcomp &lt;int&gt;, series &lt;int&gt;, taxadjunct &lt;int&gt;,
## #   family &lt;int&gt;, tax_above_fam &lt;int&gt;, variant &lt;int&gt;, misc &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="es-verification.html#cb93-1" tabindex="-1"></a><span class="fu">head</span>(MLRA18_triage_summary)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 26
## # Groups:   ecositeid, siteiid, siteobsiid,
## #   vegplotiid, peiid, pedon_id,
## #   representative, ecostateid [6]
##   ecositeid   siteiid siteobsiid vegplotiid peiid pedon_id representative
##   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;             &lt;int&gt;
## 1 F001XA001WA 1868185 2338844    1173348    &lt;NA&gt;  &lt;NA&gt;                 NA
## 2 F018XA201CA 1867763 2338220    1174740    &lt;NA&gt;  &lt;NA&gt;                 NA
## 3 F018XA201CA 1867773 2338230    1174750    &lt;NA&gt;  &lt;NA&gt;                 NA
## 4 F018XA201CA 1867775 2338232    1174752    &lt;NA&gt;  &lt;NA&gt;                 NA
## 5 F018XA201CA 1867777 2338234    1174754    &lt;NA&gt;  &lt;NA&gt;                 NA
## 6 F018XA201CA 1881378 2338235    1174755    &lt;NA&gt;  &lt;NA&gt;                 NA
## # ℹ 19 more variables: ecostateid &lt;chr&gt;, commphaseid &lt;chr&gt;, overcanclass &lt;lgl&gt;,
## #   totcanclass &lt;lgl&gt;, heighclasslow &lt;lgl&gt;, heighclasshigh &lt;lgl&gt;,
## #   planttypegroup &lt;lgl&gt;, akstratumclass &lt;lgl&gt;, vegstrata &lt;lgl&gt;,
## #   plantsym &lt;lgl&gt;, speciescancov &lt;lgl&gt;, plant_abund &lt;int&gt;, heightlimit &lt;int&gt;,
## #   plant_abund_logic &lt;lgl&gt;, heightlimit_logic &lt;lgl&gt;, strata &lt;int&gt;,
## #   strata_logic &lt;lgl&gt;, sum_logic &lt;int&gt;, sum_logic_no_can &lt;int&gt;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="nasis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="package-buildingmaintaining-tips.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06-ES-verification.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
